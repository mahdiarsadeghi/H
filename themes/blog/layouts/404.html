<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Page not found</title>
    <style>
      body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; padding: 2rem; }
      .container { max-width: 800px; margin: 0 auto; }
      .actions a { margin-right: 1rem; }
      .fa { direction: rtl; text-align: right; }
    </style>
  </head>
  <body>
    <div class="container" id="not-found">
      <h1 id="title">Page not found</h1>
      <p id="message">Sorry — the page you requested doesn't exist.</p>

      <div class="actions">
        <a id="home-en" href="{{ "/en/" | relURL }}">English home</a>
        <a id="home-fa" href="{{ "/fa/" | relURL }}">صفحهٔ اصلی فارسی</a>
      </div>

      <p id="hint">If you expected content in another language, try the language selector or visit the site home for that language.</p>
    </div>

    <script>
      (function () {
        var p = location.pathname || '/';
        // If the path looks like a Farsi path, show Persian messages
        if (p.indexOf('/fa/') === 0 || p === '/fa' || p === '/fa/') {
          document.getElementById('title').textContent = 'صفحه یافت نشد';
          document.getElementById('message').textContent = 'متأسفیم — صفحهٔ درخواستی به فارسی موجود نیست.';
          document.getElementById('hint').textContent = 'اگر انتظار ترجمهٔ این صفحه را داشتید، می‌توانید از صفحهٔ اصلی فارسی دیدن کنید یا از سوئیچر زبان استفاده کنید.';
          document.getElementById('not-found').classList.add('fa');
        }
      })();
    </script>
  </body>
</html>
<!DOCTYPE html>
<html lang="{{ .Site.Language.Lang }}" dir="{{ or .Site.Language.LanguageDirection "ltr" }}">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>{{ if eq .Site.Language.Lang "fa" }}صفحه پیدا نشد{{ else }}Page not found{{ end }}</title>
  {{ partial "head/css.html" . }}
  <style>
    .notranslated { max-width: 720px; margin: 3rem auto; padding: 1.5rem; border: 1px solid var(--border); border-radius: 8px; background: var(--bg); color: var(--text); }
    .notranslated h1 { margin-top: 0; }
    .notranslated a { color: var(--accent); }
  </style>
</head>
<body>
  <main class="notranslated">
    {{ if eq .Site.Language.Lang "fa" }}
      <h1>این صفحه هنوز ترجمه نشده است</h1>
      <p>به نظر می‌رسد این صفحه برای زبان فارسی ترجمه‌ای ندارد. اگر می‌خواهید نسخهٔ انگلیسی را ببینید روی دکمه زیر کلیک کنید:</p>
      <p><a id="view-en" href="#">نمایش نسخهٔ انگلیسی صفحه</a></p>
      <p><a href="{{ "/fa/" | relLangURL }}">بازگشت به صفحهٔ اصلی فارسی</a></p>
    {{ else }}
      <h1>Page not translated</h1>
      <p>This page doesn't have a translation yet. You can view the English version using the link below:</p>
      <p><a id="view-en" href="#">View English page</a></p>
      <p><a href="{{ "/" | relLangURL }}">Back to site home</a></p>
    {{ end }}
  </main>

  <script>
    // Attempt to compute the corresponding English URL by stripping the language prefix
    (function () {
      var link = document.getElementById('view-en');
      if (!link) return;
      var p = location.pathname || '/';
      // If the path starts with a language code like /fa/, remove it
      var newp = p.replace(/^\/([a-z]{2})(?:\/|$)/, '/');
      // Preserve query and hash
      var q = location.search || '';
      var h = location.hash || '';
      link.href = newp + q + h;
    })();
  </script>

  {{ partial "head/js.html" . }}
</body>
</html>
